rcw
===

<img src="https://raw.githubusercontent.com/r4io/rcw/master/assets/img/rcw_logo.png" width="10%" />

Install Package
---------------

    git clone git@github.com:R4IO/rcw.git
    cd rcw
    devtools::install()

Example Usage
-------------

Creating a bar chart

    library(rcw)
    rcwData <- data.frame(
      x = c(1000, 1001, 1010, 1011, 1100, 1101, 1110, 1111),
      y = c(15, -20, 10, 40, 30, 25, 65, 27),
      highlightIndex = c(-1, -1, 0, -1, -1, -1, 1, -1)
    )
    rcwChart(rcwData, type = "bar", height=300)

<img src="https://raw.githubusercontent.com/r4io/rcw/master/assets/img/screenshot_bar_chart.png" width="100%" />

<!-- get JS library and map -->
<!-- : execute `./node_modules/.bin/wce bundle --lib` in `web-components/lib/rcw-charts` (upon error, set permissions using `chmod -R u+x .`) -->
<!-- render README -->
<!-- :   `Rscript -e 'rmarkdown::render("README.Rmd", output_format = "md_document")'` -->
<!-- render flexdashboard -->
<!-- :   `Rscript -e 'rmarkdown::render("vignettes/rcwChart2.Rmd")'` -->
<!-- Rscript -e 'rmarkdown::render("vignettes/rcwChart.Rmd")' -->
<!-- build website -->
<!-- :   `Rscript -e 'pkgdown::build_site()'` -->
<!-- update articles -->
<!-- :   `Rscript -e 'pkgdown::build_articles()'` -->

Implementation approach

- generate a chart configuration object (in the same format as generated by the interactive JavaScript Chart Generator app https://github.com/cis-itn-oecd/chart-generator), for an example see attached. For the precise configuration object format (for the different chart types) Nicolas Briemant is able to help. I thought that he has already given the related information. To generate the chart configuration object, you might be able to re-use the JavaScript code used in the Chart Generator application, but without any user interaction, because the approach in R should be programmatic (all input parameters are given through the command line).

- submit (POST) the chart configuration object through payload to the share API http://stats.oecd.org/share receiving as return a chart id, for example: {"id": "4cfp"}

- using the id, generate the Chart URL for the user as output of the R function, e.g. http://stats.oecd.org/chart?id=4cfp allowing the user to generate the chart using the Chart Viewer application or to embed the chart into a web site, e.g. our T4 CMS, through different options for a pre-generated string:

Default (full responsive):

<iframe src="http://stats.oecd.org/chart?id=4cfp" width="100%" height="100%" style="border: none;" allowfullscreen="true">

  <a href="http://stats.oecd.org/chart?id=4cfp" target="_blank">Key Short-Term Economic Indicators</a>

</iframe>

oecd.org/T4: 3 columns (width 270px):

<iframe src="http://stats.oecd.org/chart?id=4cfp" width="270" height="203" style="border: none;" allowfullscreen="true">

  <a href="http://stats.oecd.org/chart?id=4cfp" target="_blank">Key Short-Term Economic Indicators</a>

</iframe>

oecd.org/T4: 4 columns (width 370px):

<iframe src="http://stats.oecd.org/chart?id=4cfp" width="370" height="278" style="border: none;" allowfullscreen="true">

  <a href="http://stats.oecd.org/chart?id=4cfp" target="_blank">Key Short-Term Economic Indicators</a>

</iframe>

oecd.org/T4: 6 columns (width 560px):

<iframe src="http://stats.oecd.org/chart?id=4cfp" width="560" height="420" style="border: none;" allowfullscreen="true">

  <a href="http://stats.oecd.org/chart?id=4cfp" target="_blank">Key Short-Term Economic Indicators</a>

</iframe>

oecd.org/T4: 8 columns (width 760px):

<iframe src="http://stats.oecd.org/chart?id=4cfp" width="760" height="570" style="border: none;" allowfullscreen="true">

  <a href="http://stats.oecd.org/chart?id=4cfp" target="_blank">Key Short-Term Economic Indicators</a>

</iframe>

oecd.org/T4: 9 columns (width 855px):

<iframe src="http://stats.oecd.org/chart?id=4cfp" width="855" height="642" style="border: none;" allowfullscreen="true">

  <a href="http://stats.oecd.org/chart?id=4cfp" target="_blank">Key Short-Term Economic Indicators</a>

</iframe>

oecd.org/T4: 12 columns (width 1140px):

<iframe src="http://stats.oecd.org/chart?id=4cfp" width="1140" height="855" style="border: none;" allowfullscreen="true">

  <a href="http://stats.oecd.org/chart?id=4cfp" target="_blank">Key Short-Term Economic Indicators</a>

</iframe>